# VirtualizedList Component

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- üìè **–î–≤–∞ —Ä–µ–∂–∏–º–∞** - —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≤—ã—Å–æ—Ç–æ–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- üé® **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
- ‚ö° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `willChange` –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### VirtualizedList (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –≤—ã—Å–æ—Ç—É:

```tsx
import { VirtualizedList } from '@/components/VirtualizedList'

interface Letter {
  id: string
  number: string
  subject: string
}

function MyComponent() {
  const letters: Letter[] = [...] // 1000+ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

  return (
    <VirtualizedList
      items={letters}
      itemHeight={120} // –í—ã—Å–æ—Ç–∞ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
      renderItem={(letter, index) => (
        <LetterCard key={letter.id} letter={letter} />
      )}
      overscan={3} // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏
      className="h-screen"
      emptyState={<div>–ù–µ—Ç –ø–∏—Å–µ–º</div>}
      isLoading={false}
    />
  )
}
```

### AutoVirtualizedList (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤—ã—Å–æ—Ç–∞)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—É—é –≤—ã—Å–æ—Ç—É:

```tsx
import { AutoVirtualizedList } from '@/components/VirtualizedList'

function MyComponent() {
  const comments: Comment[] = [...] // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã

  return (
    <AutoVirtualizedList
      items={comments}
      estimatedItemHeight={80} // –ü—Ä–∏–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞
      renderItem={(comment, index) => (
        <CommentCard key={comment.id} comment={comment} />
      )}
      overscan={5}
      className="h-full"
    />
  )
}
```

## Props

### VirtualizedList

| Prop | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------------|----------|
| `items` | `T[]` | **required** | –ú–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| `renderItem` | `(item: T, index: number) => ReactNode` | **required** | –§—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ |
| `itemHeight` | `number` | `100` | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ px |
| `overscan` | `number` | `3` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ |
| `className` | `string` | `''` | CSS –∫–ª–∞—Å—Å—ã –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `emptyState` | `ReactNode` | - | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ |
| `loadingState` | `ReactNode` | - | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ |
| `isLoading` | `boolean` | `false` | –§–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏ |

### AutoVirtualizedList

–í—Å–µ props –∫–∞–∫ —É `VirtualizedList`, –∫—Ä–æ–º–µ:

| Prop | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------------|----------|
| `estimatedItemHeight` | `number` | `100` | –ü—Ä–∏–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–ø–∏—Å–æ–∫ –ø–∏—Å–µ–º

```tsx
<VirtualizedList
  items={letters}
  itemHeight={140}
  renderItem={(letter) => (
    <div className="border-b border-gray-700 p-4">
      <h3>{letter.subject}</h3>
      <p>{letter.organization}</p>
    </div>
  )}
  emptyState={
    <div className="flex h-full items-center justify-center">
      <p className="text-gray-400">–ü–∏—Å–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
    </div>
  }
  className="h-[calc(100vh-200px)]"
/>
```

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å —Ä–∞–∑–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π

```tsx
<AutoVirtualizedList
  items={comments}
  estimatedItemHeight={120}
  renderItem={(comment) => (
    <div className="border-b border-gray-700 p-4">
      <div className="flex items-start gap-3">
        <Avatar user={comment.author} />
        <div className="flex-1">
          <p className="font-medium">{comment.author.name}</p>
          <p className="mt-1 text-sm text-gray-300">{comment.text}</p>
          {comment.attachments?.length > 0 && (
            <div className="mt-2">
              {comment.attachments.map(att => (
                <FilePreview key={att.id} file={att} />
              ))}
            </div>
          )}
        </div>
      </div>
    </div>
  )}
  overscan={5}
  className="h-96"
/>
```

### –° —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏

```tsx
<VirtualizedList
  items={data}
  itemHeight={100}
  renderItem={(item) => <ItemCard item={item} />}
  isLoading={isLoading}
  loadingState={
    <div className="flex h-full items-center justify-center">
      <Loader className="h-8 w-8 animate-spin text-teal-500" />
    </div>
  }
/>
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- ‚úÖ –°–ø–∏—Å–∫–∏ —Å 50+ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- ‚úÖ –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
- ‚úÖ –¢—è–∂–µ–ª—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ (–º–Ω–æ–≥–æ DOM —É–∑–ª–æ–≤)
- ‚úÖ –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- ‚ùå –ú–∞–ª–µ–Ω—å–∫–∏–µ —Å–ø–∏—Å–∫–∏ (< 30 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- ‚ùå –°–ø–∏—Å–∫–∏ —Å —á–∞—Å—Ç—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ø–æ—Ä—è–¥–∫–∞
- ‚ùå –í–ª–æ–∂–µ–Ω–Ω—ã–µ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É** –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ - –±—ã—Å—Ç—Ä–µ–µ —á–µ–º `AutoVirtualizedList`
2. **–£–≤–µ–ª–∏—á—å—Ç–µ overscan** –¥–ª—è –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ (–Ω–æ –±–æ–ª—å—à–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞)
3. **–ú–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ renderItem** —Å `useCallback` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è
4. **–î–æ–±–∞–≤—å—Ç–µ key** –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è React

```tsx
const renderItem = useCallback((letter: Letter) => (
  <LetterCard key={letter.id} letter={letter} />
), [])

<VirtualizedList
  items={letters}
  renderItem={renderItem}
  itemHeight={120}
/>
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

- –ï—Å–ª–∏ `preferences.animations === false` - –∞–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã
- –ï—Å–ª–∏ `preferences.listAnimations === false` - –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–æ–≤ –æ—Ç–∫–ª—é—á–µ–Ω—ã
- –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ (scrollTop === 0)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### VirtualizedList

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç–æ–π —Ä–∞—Å—á–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ `scrollTop` –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç—ã
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π scroll event
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

### AutoVirtualizedList

- –ò–∑–º–µ—Ä—è–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –≤—ã—Å–æ—Ç—É –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ ref
- –•—Ä–∞–Ω–∏—Ç –≤—ã—Å–æ—Ç—ã –≤ Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `estimatedItemHeight` –¥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç—ã
- –ë–æ–ª—å—à–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, –Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –≤—ã—Å–æ—Ç—É

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞

- `willChange: transform` - –ø–æ–¥—Å–∫–∞–∑–∫–∞ –±—Ä–∞—É–∑–µ—Ä—É –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `transform: translateY()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPU –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
- Debounce –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - scroll events –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏
