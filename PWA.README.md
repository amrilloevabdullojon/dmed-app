# PWA (Progressive Web App) –¥–ª—è DMED Letters

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ DMED Letters —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º Progressive Web App —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π offline —Ä–µ–∂–∏–º–∞, push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ PWA

### üì± –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **Android**: –ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É
- **iOS**: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω
- **Desktop**: Chrome, Edge –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–∫–æ–Ω–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

### üîÑ Offline –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –†–∞–±–æ—Ç–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏

### üì≤ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º
- –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —á–µ—Ä–µ–∑ `usePushNotifications` hook
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π
- –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- Prefetching –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. PWAProvider
–ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

```tsx
// src/components/PWAProvider.tsx
<PWAProvider>
  <App />
</PWAProvider>
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
- –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
- –ò–Ω–¥–∏–∫–∞—Ü–∏—è online/offline —Å—Ç–∞—Ç—É—Å–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Install Prompt

#### 2. PWAInstallPrompt
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (iOS/Android/Desktop)
- –†–∞–∑–Ω—ã–µ UI –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- Cooldown 7 –¥–Ω–µ–π –ø–æ—Å–ª–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ localStorage

**iOS:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç Safari –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**Android/Desktop:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π API `beforeinstallprompt`
- –ö–Ω–æ–ø–∫–∞ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" / "–ü–æ–∑–∂–µ"

#### 3. usePWA Hook
–û—Å–Ω–æ–≤–Ω–æ–π hook –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PWA.

```tsx
import { usePWA } from '@/hooks/usePWA'

function MyComponent() {
  const {
    isInstalled,        // –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    isUpdateAvailable,  // –î–æ—Å—Ç—É–ø–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    isOnline,           // –°—Ç–∞—Ç—É—Å —Å–µ—Ç–∏
    registration,       // Service Worker registration
    updateServiceWorker,
    unregisterServiceWorker,
    cacheUrls,
    clearCache,
  } = usePWA()
}
```

#### 4. usePushNotifications Hook
Hook –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.

```tsx
import { usePushNotifications } from '@/hooks/usePWA'

function NotificationSettings() {
  const {
    permission,         // 'granted' | 'denied' | 'default'
    subscription,       // PushSubscription –∏–ª–∏ null
    requestPermission,
    subscribe,
    unsubscribe,
  } = usePushNotifications()

  const handleEnable = async () => {
    const granted = await requestPermission()
    if (granted) {
      const sub = await subscribe(VAPID_PUBLIC_KEY)
      // –û—Ç–ø—Ä–∞–≤–∏—Ç—å subscription –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    }
  }
}
```

---

## Service Worker

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### Cache First
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã
```
Cache ‚Üí Network (–µ—Å–ª–∏ –Ω–µ –≤ –∫–µ—à–µ) ‚Üí Cache (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)
```

#### Network First
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: API –∑–∞–ø—Ä–æ—Å—ã, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
```
Network ‚Üí Cache (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å) ‚Üí Cache (–µ—Å–ª–∏ —Å–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)
```

#### Stale While Revalidate
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: JS/CSS —Ñ–∞–π–ª—ã
```
Cache (–æ—Ç–¥–∞—Ç—å —Å—Ä–∞–∑—É) ‚Üí Network (–æ–±–Ω–æ–≤–∏—Ç—å –≤ —Ñ–æ–Ω–µ)
```

### –§–∞–π–ª—ã –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

```javascript
// sw.js
const ROUTE_STRATEGIES = [
  {
    pattern: /\/_next\/static\//,
    strategy: 'cache-first',
    cacheName: 'dmed-letters-static',
  },
  {
    pattern: /\.(?:png|jpg|jpeg|svg|gif|webp|ico)$/,
    strategy: 'cache-first',
    cacheName: 'dmed-letters-images',
  },
  {
    pattern: /\/api\//,
    strategy: 'network-first',
    cacheName: 'dmed-letters-api',
  },
]
```

---

## Manifest.json

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è

```json
{
  "name": "DMED Letters",
  "short_name": "DMED",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#14b8a6",
  "background_color": "#0f172a"
}
```

### –ò–∫–æ–Ω–∫–∏
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SVG –∏–∫–æ–Ω–∫–∏:
- `/favicon.svg` - –æ—Å–Ω–æ–≤–Ω–∞—è –∏–∫–æ–Ω–∫–∞
- `/apple-touch-icon.svg` - –¥–ª—è iOS
- `/logo-mark.svg` - –¥–ª—è maskable icon

### Shortcuts
–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –¥–æ–º–∞—à–Ω–µ–≥–æ —ç–∫—Ä–∞–Ω–∞:
- –ù–æ–≤–æ–µ –ø–∏—Å—å–º–æ ‚Üí `/letters/new`
- –í—Å–µ –ø–∏—Å—å–º–∞ ‚Üí `/letters`
- –û—Ç—á—ë—Ç—ã ‚Üí `/reports`

### Share Target
–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
```json
{
  "share_target": {
    "action": "/share",
    "method": "POST",
    "enctype": "multipart/form-data",
    "params": {
      "files": [{
        "name": "file",
        "accept": ["image/*", "application/pdf", ".doc", ".docx"]
      }]
    }
  }
}
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ù–∞ Android:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ Chrome
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –±–∞–Ω–Ω–µ—Ä "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –∏–ª–∏
3. –ú–µ–Ω—é ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

**–ù–∞ iOS:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ Safari
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
3. –í—ã–±–µ—Ä–∏—Ç–µ "–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π"
4. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"

**–ù–∞ Desktop:**
1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∏–ª–∏
2. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π prompt

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ö–æ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è:
1. –ü–æ—è–≤–∏—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
2. –ù–∞–∂–º–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å"
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π

### 3. Offline —Ä–µ–∂–∏–º

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ö–µ—à–∏—Ä—É–µ—Ç –ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏

### 4. Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```tsx
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
import { usePushNotifications } from '@/hooks/usePWA'

function Settings() {
  const { permission, requestPermission, subscribe } = usePushNotifications()

  const enableNotifications = async () => {
    // 1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
    const granted = await requestPermission()

    if (granted) {
      // 2. –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ push
      const subscription = await subscribe(process.env.NEXT_PUBLIC_VAPID_KEY!)

      // 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å subscription –Ω–∞ —Å–µ—Ä–≤–µ—Ä
      await fetch('/api/push/subscribe', {
        method: 'POST',
        body: JSON.stringify(subscription)
      })
    }
  }

  return (
    <button
      onClick={enableNotifications}
      disabled={permission === 'denied'}
    >
      {permission === 'granted' ? '–í–∫–ª—é—á–µ–Ω—ã' : '–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è'}
    </button>
  )
}
```

---

## API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö URL

```tsx
import { usePWA } from '@/hooks/usePWA'

function MyComponent() {
  const { cacheUrls } = usePWA()

  useEffect(() => {
    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∞–∂–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    cacheUrls([
      '/letters',
      '/reports',
      '/settings'
    ])
  }, [])
}
```

### –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞

```tsx
import { usePWA } from '@/hooks/usePWA'

function Settings() {
  const { clearCache } = usePWA()

  const handleClearCache = async () => {
    await clearCache()
    alert('–ö–µ—à –æ—á–∏—â–µ–Ω')
  }
}
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

```tsx
import { usePWA } from '@/hooks/usePWA'

function Header() {
  const { registration } = usePWA()

  const checkForUpdates = async () => {
    if (registration) {
      await registration.update()
    }
  }
}
```

---

## Best Practices

### 1. –ù–µ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```javascript
// –í sw.js - –∏—Å–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ endpoints
if (url.pathname.includes('/api/auth')) {
  return fetch(request) // Network only
}
```

### 2. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞
```javascript
const CACHE_VERSION = 'v1.0.0'
const CACHE_NAME = `dmed-letters-${CACHE_VERSION}`
```

### 3. –õ–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞ –∫–µ—à–∞
–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–µ—à–∏:
```javascript
// –£–¥–∞–ª–∏—Ç—å –∫–µ—à–∏ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
const CACHE_MAX_AGE = 30 * 24 * 60 * 60 * 1000
```

### 4. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ç–∏
–í—Å–µ–≥–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Å—Ç–∞—Ç—É—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

### 5. Graceful degradation
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –µ—Å–ª–∏ Service Worker –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PWA

### Chrome DevTools

1. **Application tab**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å manifest
   - –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å Service Workers
   - –ò–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å Cache Storage

2. **Lighthouse**:
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å PWA audit
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
   - –¶–µ–ª—å: 100% –ø–æ PWA –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

3. **Network tab**:
   - –í–∫–ª—é—á–∏—Ç—å "Offline"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–µ–∑ —Å–µ—Ç–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**Android:**
- Chrome DevTools Remote Debugging
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ USB

**iOS:**
- Safari Web Inspector
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

---

## Troubleshooting

### Service Worker –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. HTTPS –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è SW)
2. –ü—É—Ç—å –∫ sw.js –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
3. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

```javascript
// –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
navigator.serviceWorker.register('/sw.js')
  .then(reg => console.log('SW registered:', reg))
  .catch(err => console.error('SW registration failed:', err))
```

### –ö–µ—à –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á–∏—Ç—å CACHE_VERSION –≤ sw.js
2. –í—ã–∑–≤–∞—Ç—å `updateServiceWorker()`
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

### iOS –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç install prompt

**iOS –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `beforeinstallprompt`**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é

### Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. VAPID –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
2. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ
3. Service Worker –∞–∫—Ç–∏–≤–µ–Ω
4. HTTPS –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ú–µ—Ç—Ä–∏–∫–∏

- **First Contentful Paint (FCP)**: < 1.5s
- **Largest Contentful Paint (LCP)**: < 2.5s
- **Time to Interactive (TTI)**: < 3.5s
- **Cumulative Layout Shift (CLS)**: < 0.1

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Precaching**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –∫–µ—à–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
2. **Lazy Loading**: –ù–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
3. **Code Splitting**: Next.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç –∫–æ–¥
4. **Image Optimization**: WebP —Ñ–æ—Ä–º–∞—Ç + lazy loading

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
Service Workers —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ HTTPS (–∫—Ä–æ–º–µ localhost).

### Content Security Policy
```html
<meta http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'">
```

### Scope –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
Service Worker –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–µ–º—É scope (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/`).

---

## Roadmap

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å Web Share API
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Badging API –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –≤ manifest
- [ ] –°–æ–∑–¥–∞—Ç—å –∏–∫–æ–Ω–∫–∏ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ (PNG)

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [MDN: Progressive Web Apps](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps)
- [web.dev: PWA](https://web.dev/progressive-web-apps/)
- [PWA Builder](https://www.pwabuilder.com/)
- [Workbox (Google)](https://developers.google.com/web/tools/workbox)
